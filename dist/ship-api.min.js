!function(a){"use strict";a.fn.shipApi=function(b){var c=a.extend({url:"https://api.laiva-api.pw/v1"},b);a(this).html(renderShipApiSearchControls());var d=a(this).find(".main-search-input");if(d.length<1)throw new Error("Search input field missing, is your theme ok?");var e=a(this).find(".main-search-results");if(e.length<1)throw new Error("Search results container missing, is your theme ok?");var f=a(this).find(".main-search-btn");if(f.length<1)throw new Error("Search button missing, is your theme ok?");f.click(function(){var b=d.val();a.getJSON(c.url+"/ships?q="+b,function(b){for(var d=[],f=0;f<b.hits.hits.length;f++){var g=b.hits.hits[f];g._source._id=g._id,d.push(g._source)}e.html(renderShipApiSearchresults({ships:d})),e.find(".searchresult").click(function(){var b=a(this).attr("data-ship-id"),d=a(this).attr("data-ship-name"),e=bootbox.dialog({title:d,message:'<p><i class="fa fa-spin fa-spinner"></i> Ladataan...</p>'});e.init(function(){a.getJSON(c.url+"/ships/"+b,function(a){e.find(".bootbox-body").html(renderShipApiDetailModal({ship:a}))})})})})})}}(jQuery);