!function(a){"use strict";a.fn.shipApi=function(b){var c=a.extend({url:"https://api.laiva-api.pw/v1",size:10},b);a(this).html(renderShipApiSearchControls());var d=0,e=0,f="",g=a(this);g.on("ship-select",function(a,b,d){"function"==typeof c.onShipSelect&&c.onShipSelect(b,d)});var h=a(this).find(".main-search-input");if(h.length<1)throw new Error("Search input field missing, is your theme ok?");var i=a(this).find(".main-search-results");if(i.length<1)throw new Error("Search results container missing, is your theme ok?");var j=a(this).find(".main-search-btn");if(j.length<1)throw new Error("Search button missing, is your theme ok?");var k=function(){a.getJSON(c.url+"/ships?q="+f+"&from="+d+"&size="+c.size,function(b){e=b.hits.total;for(var f=[],h=0;h<b.hits.hits.length;h++){var j=b.hits.hits[h];j._source._id=j._id,f.push(j._source)}i.html(renderShipApiSearchresults({ships:f,offset:d,size:c.size,total:e})),i.find(".prev-page").click(function(){d-=c.size,k()}),i.find(".next-page").click(function(){d+=c.size,k()}),i.find(".goto-page").click(function(){d=parseInt(a(this).attr("data-offset"),10),k()}),i.find(".searchresult").click(function(){var b=a(this).attr("data-ship-id");a(this).attr("data-ship-name");a.getJSON(c.url+"/ships/"+b,function(a){g.trigger("ship-select",[a,renderShipApiDetailModal({ship:a})])})})})};j.click(function(){f=h.val(),d=0,k()}),h.keyup(function(a){13==a.keyCode&&j.click()})}}(jQuery);